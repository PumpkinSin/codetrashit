# RSS åŠ¨æ€è®¢é˜…ç”Ÿæˆå™¨

å®šæ—¶æŠ“å– Bç«™ / çŸ¥ä¹ / è±†ç“£å…³æ³¨åŠ¨æ€ â†’ ç”Ÿæˆ RSS â†’ ä¸Šä¼  Cloudflare R2ï¼Œé…åˆ Inoreader ç­‰é˜…è¯»å™¨ä½¿ç”¨ã€‚

> çº¯ Node.jsï¼Œæ— éœ€æ•°æ®åº“ã€‚ä¸€ä¸ª `.env` æå®šæ‰€æœ‰é…ç½®ã€‚

## åŠŸèƒ½ä¸€è§ˆ

| æ¨¡å— | è¯´æ˜ |
|------|------|
| ğŸ“º Bç«™ä¸»å· | æŠ“å–å…³æ³¨åˆ—è¡¨çš„å…¨éƒ¨åŠ¨æ€ï¼ˆè§†é¢‘ã€å›¾æ–‡ã€æ–‡ç« ã€è½¬å‘ç­‰ï¼‰ |
| ğŸ“º Bç«™å°å· | ç‹¬ç«‹ SESSDATAï¼ŒåªæŠ“è§†é¢‘åŠ¨æ€ |
| ğŸ’¬ çŸ¥ä¹ | å…³æ³¨åˆ—è¡¨çš„å›ç­”ã€æ–‡ç« ã€æƒ³æ³•ï¼ˆè‡ªåŠ¨è¿‡æ»¤å¹¿å‘Š/æ¨å¹¿/æ— æ•ˆé“¾æ¥ï¼‰ |
| ğŸ“– è±†ç“£ | å…³æ³¨æ—¶é—´çº¿ï¼ˆå¹¿æ’­ã€æ ‡è®°ã€è½¬å‘ç­‰ï¼ŒæŒ‰æ´»åŠ¨ç±»å‹è¿‡æ»¤ï¼‰ |
| â˜ï¸ R2 ä¸Šä¼  | RSS XML è‡ªåŠ¨åŒæ­¥åˆ° Cloudflare R2 |
| ğŸ”„ å®šæ—¶æŠ“å– | å¯é…ç½®é—´éš”ï¼ˆé»˜è®¤ 30 åˆ†é’Ÿï¼‰ï¼Œæ§åˆ¶å°æ˜¾ç¤ºæ—¶é—´æˆ³ |
| ğŸ” æ™ºèƒ½ç¿»é¡µ | å‘ç°é‡å¤åå¯å¤šçˆ¬ N é¡µï¼Œæ•æ‰å»¶è¿Ÿå‡ºç°çš„å†…å®¹ |
| ğŸš« å†…å®¹è¿‡æ»¤ | æŒ‰åŠ¨æ€ç±»å‹ã€å…³é”®è¯ç²¾ç»†è¿‡æ»¤ |
| ğŸ–¼ï¸ å›¾ç‰‡ä»£ç† | æ‰€æœ‰å›¾ç‰‡ç»Ÿä¸€èµ° wsrv.nl ä»£ç†ï¼Œé¿å… RSS é˜…è¯»å™¨é˜²ç›—é“¾é—®é¢˜ |
| ğŸ§¹ HTML æ¸…ç† | çŸ¥ä¹å†…å®¹è‡ªåŠ¨ sanitizeï¼Œä¿ç•™æ ¼å¼æ ‡ç­¾ï¼Œå‰”é™¤æ— ç”¨å±æ€§ |
| ğŸ¯ å°å· Tab | æ²¹çŒ´è„šæœ¬åœ¨ Bilibili-Gate ä¸­æ³¨å…¥ç‹¬ç«‹ã€Œå°å·ã€Tabï¼Œç‚¹å‡» UP ä¸»åå¯è·³è½¬åŠ¨æ€é¡µ |

---

## å¿«é€Ÿå¼€å§‹

```bash
cd server
npm install
cp .env.example .env   # ç¼–è¾‘ .env å¡«å…¥ä½ çš„ Cookie å’Œ R2 é…ç½®
node server.js          # æˆ–åŒå‡» start.bat
```

å¯åŠ¨åè®¿é—® `http://localhost:3457/api/status` ç¡®è®¤æœåŠ¡çŠ¶æ€ã€‚

---

## é…ç½®

æ‰€æœ‰é…ç½®åœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œå‚è€ƒ `.env.example`ã€‚

### Cookie è·å–

| å¹³å° | éœ€è¦çš„ Cookie | è·å–æ–¹å¼ |
|------|-------------|----------|
| Bç«™ | `SESSDATA` | F12 â†’ åº”ç”¨ â†’ Cookie â†’ `bilibili.com` |
| çŸ¥ä¹ | `d_c0` | F12 â†’ åº”ç”¨ â†’ Cookie â†’ `zhihu.com` |
| è±†ç“£ | `dbcl2` | F12 â†’ åº”ç”¨ â†’ Cookie â†’ `douban.com` |

```env
BILIBILI_SESSDATA=ä½ çš„SESSDATAå€¼
BILIBILI_ALT_SESSDATA=å°å·çš„SESSDATAå€¼ï¼ˆå¯é€‰ï¼‰
ZHIHU_COOKIE=d_c0=ä½ çš„d_c0å€¼
DOUBAN_COOKIE=dbcl2="ä½ çš„dbcl2å€¼"
```

> âš ï¸ Cookie çº¦ 1 ä¸ªæœˆè¿‡æœŸï¼Œå±Šæ—¶éœ€ä»æµè§ˆå™¨é‡æ–°å¤åˆ¶å¹¶æ›´æ–° `.env`ï¼Œç„¶åé‡å¯æœåŠ¡ã€‚

### å†…å®¹è¿‡æ»¤

```env
# Bç«™ï¼šè·³è¿‡æŒ‡å®šåŠ¨æ€ç±»å‹
BILIBILI_SKIP_TYPES=DYNAMIC_TYPE_LIVE_RCMD,DYNAMIC_TYPE_FORWARD

# Bç«™ï¼šå…³é”®è¯é»‘åå•ï¼ˆåŒ¹é…æ ‡é¢˜/æ­£æ–‡ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼‰
BILIBILI_BLOCK_KEYWORDS=å¤–å–çº¢åŒ…,ä¼˜æƒ åˆ¸,æ‹¼å¤šå¤š

# çŸ¥ä¹ï¼šè·³è¿‡æŒ‡å®šåŠ¨æ€ç±»å‹
ZHIHU_SKIP_VERBS=MEMBER_FOLLOW_QUESTION,QUESTION_FOLLOW

# è±†ç“£ï¼šè·³è¿‡æŒ‡å®šæ´»åŠ¨ç±»å‹
DOUBAN_SKIP_ACTIVITIES=æƒ³çœ‹,æƒ³è¯»,æƒ³å¬
```

### æ™ºèƒ½ç¿»é¡µ

```env
BILIBILI_EXTRA_PAGES=2   # å‘ç°é‡å åå†å¤šçˆ¬ 2 é¡µ
ZHIHU_EXTRA_PAGES=2
DOUBAN_EXTRA_PAGES=2
```

---

## API

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/status` | æœåŠ¡çŠ¶æ€ï¼ˆå„å¹³å°æ•°æ®é‡ã€é…ç½®æƒ…å†µç­‰ï¼‰ |
| `POST` | `/api/fetch` | æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡å…¨å¹³å°æŠ“å– |
| `POST` | `/api/sync` | æ‰‹åŠ¨åŒæ­¥ RSS åˆ° R2 |
| `GET` | `/api/feed/:platform` | é¢„è§ˆ RSS XMLï¼ˆ`bilibili` / `zhihu` / `douban` / `bilibili-alt`ï¼‰ |
| `GET` | `/api/data/:platform` | è¿”å›åŸå§‹ JSON æ•°æ®ï¼ˆæ²¹çŒ´è„šæœ¬ä½¿ç”¨ï¼‰ |
| `POST` | `/api/feed` | æ¥æ”¶å¤–éƒ¨æ¨é€çš„åŠ¨æ€æ•°æ®ï¼ˆå…¼å®¹æ‰©å±•ï¼‰ |

---

## æ²¹çŒ´è„šæœ¬ï¼šå°å· Tab

`bilibili-gate-å°å·/gate-other.js` æ˜¯ä¸€ä¸ªæ²¹çŒ´è„šæœ¬ï¼Œéœ€é…åˆ [Bilibili-Gate](https://github.com/magicdawn/bilibili-gate) ä½¿ç”¨ã€‚

**åŠŸèƒ½ï¼š**
- åœ¨ Bilibili-Gate ç•Œé¢æ–°å¢ç‹¬ç«‹ã€Œå°å·ã€Tab
- ä»æœ¬åœ°æœåŠ¡æ‹‰å–å°å·è§†é¢‘æ•°æ®ï¼Œä»¥ Gate é£æ ¼å¡ç‰‡å±•ç¤º
- ç‚¹å‡» UP ä¸»åå¯ç›´æ¥è·³è½¬åˆ° `space.bilibili.com/{mid}/dynamic`
- 30 ç§’è‡ªåŠ¨è½®è¯¢åˆ·æ–° + æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

**å®‰è£…ï¼š**
1. å®‰è£… Tampermonkey / Violentmonkey
2. æ–°å»ºè„šæœ¬ï¼Œç²˜è´´ `gate-other.js` å†…å®¹
3. ç¡®ä¿æœ¬åœ°æœåŠ¡å·²å¯åŠ¨ï¼ˆé»˜è®¤ `http://127.0.0.1:3457`ï¼‰

---

## é¡¹ç›®ç»“æ„

```
server/
â”œâ”€â”€ .env.example             # é…ç½®æ¨¡æ¿
â”œâ”€â”€ server.js                # Express æœåŠ¡å…¥å£
â”œâ”€â”€ config.js                # .env â†’ é…ç½®å¯¹è±¡
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ bilibili-fetcher.js  # Bç«™åŠ¨æ€æŠ“å–ï¼ˆä¸»å·/å°å·å¤ç”¨ï¼‰
â”‚   â”œâ”€â”€ zhihu-fetcher.js     # çŸ¥ä¹åŠ¨æ€æŠ“å–ï¼ˆè‡ªåŠ¨è¿‡æ»¤å¹¿å‘Š/æ— æ•ˆé“¾æ¥ï¼‰
â”‚   â”œâ”€â”€ douban-fetcher.js    # è±†ç“£æ—¶é—´çº¿æŠ“å–
â”‚   â”œâ”€â”€ fetch-scheduler.js   # å®šæ—¶è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ data-store.js        # æœ¬åœ° JSON å­˜å‚¨ï¼ˆå»é‡/åˆå¹¶ï¼‰
â”‚   â”œâ”€â”€ rss-generator.js     # RSS XML ç”Ÿæˆï¼ˆå›¾ç‰‡ä»£ç† + HTML æ¸…ç†ï¼‰
â”‚   â””â”€â”€ r2-uploader.js       # Cloudflare R2 ä¸Šä¼ 
â””â”€â”€ data/                    # è¿è¡Œæ—¶æ•°æ®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œå·² gitignoreï¼‰

bilibili-gate-å°å·/
â”œâ”€â”€ gate-other.js            # æ²¹çŒ´è„šæœ¬ï¼šBilibili-Gate å°å· Tab
â””â”€â”€ Bilibili-Gate.js         # Bilibili-Gate æœ¬ä½“ï¼ˆä¾›å‚è€ƒï¼‰

start.bat                    # Windows ä¸€é”®å¯åŠ¨
```
